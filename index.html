<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pemilihan Presiden Mahasiswa</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // ====================
    // KONFIGURASI SUPABASE
    // ====================
    const SUPABASE_URL = 'https://xxwwbydzorlxulbcrldo.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4d3dieWR6b3JseHVsYmNybGRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExMDAxMDYsImV4cCI6MjA3NjY3NjEwNn0.La5nOg80azsQp_ZuqXuj0CI552hQBwdwWgxEqfaDlDk';
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  </script>
  <style>
    body {
      box-sizing: border-box;
    }

    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .card-shadow {
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .animate-fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .vote-card {
      transition: all 0.3s ease;
    }

    .vote-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
    }

    .progress-bar {
      transition: width 0.5s ease-in-out;
    }

    /* Tambahan untuk spinner loading */
    .spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #ffffff;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s ease-in-out infinite;
      margin-right: 8px;
    }
    .spinner.hidden {
      display: none;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  </style>
</head>

<body class="gradient-bg min-h-screen">
  <!-- Login Form -->
  <div id="loginForm" class="min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl card-shadow p-8 w-full max-w-md animate-fade-in">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Pemilihan Presiden Mahasiswa</h1>
        <p class="text-gray-600">Masukkan data Anda untuk memulai voting</p>
      </div>

      <form id="voterForm" class="space-y-6">
        <div>
          <label for="nama" class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap</label>
          <input type="text" id="nama" placeholder="Masukkan Nama Lengkap" required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
        </div>

        <div>
          <label for="nim" class="block text-sm font-medium text-gray-700 mb-2">NIM</label>
          <input type="text" id="nim" placeholder="Masukkan NIM" required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
        </div>

        <div>
          <label for="password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
          <input type="password" id="password" placeholder="Masukkan Password" required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
        </div>

        <button type="submit" id="loginBtn"
          class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
          <span class="spinner hidden"></span>
          Masuk ke Voting
        </button>
      </form>
    </div>
  </div>

  <!-- Voting Page -->
  <div id="votingPage" class="min-h-screen p-4 hidden">
    <header class="bg-white rounded-2xl card-shadow p-6 mb-8 animate-fade-in">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="text-3xl font-bold text-gray-800">Pemilihan Presiden Mahasiswa</h1>
          <p class="text-gray-600 mt-2">Selamat datang, <span id="voterName" class="font-semibold"></span></p>
        </div>
        <button onclick="logout()" id="logoutBtn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
          <span class="spinner hidden"></span>
          Logout
        </button>
      </div>
    </header>

    <main class="max-w-6xl mx-auto">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- Candidate 1 -->
        <div class="bg-white rounded-2xl card-shadow p-6 vote-card animate-fade-in">
          <div class="text-center mb-6">
            <div
              class="w-32 h-32 mx-auto mb-4 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center">
              <span class="text-4xl text-white font-bold">AR</span>
            </div>
            <h3 class="text-xl font-bold text-gray-800">Ahmad Rizki</h3>
            <p class="text-gray-600">Calon No. 1</p>
          </div>

          <div class="space-y-3 mb-6">
            <div class="flex items-center text-sm text-gray-600">
              <span class="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>
              Meningkatkan fasilitas kampus
            </div>
            <div class="flex items-center text-sm text-gray-600">
              <span class="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>
              Program beasiswa mahasiswa
            </div>
            <div class="flex items-center text-sm text-gray-600">
              <span class="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>
              Kegiatan ekstrakurikuler
            </div>
          </div>

          <button onclick="vote(1)" id="voteBtn1"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
            <span class="spinner hidden"></span>
            Pilih Calon Ini
          </button>
        </div>

        <!-- Candidate 2 -->
        <div class="bg-white rounded-2xl card-shadow p-6 vote-card animate-fade-in">
          <div class="text-center mb-6">
            <div
              class="w-32 h-32 mx-auto mb-4 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center">
              <span class="text-4xl text-white font-bold">SP</span>
            </div>
            <h3 class="text-xl font-bold text-gray-800">Sari Putri</h3>
            <p class="text-gray-600">Calon No. 2</p>
          </div>

          <div class="space-y-3 mb-6">
            <div class="flex items-center text-sm text-gray-600">
              <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
              Digitalisasi layanan mahasiswa
            </div>
            <div class="flex items-center text-sm text-gray-600">
              <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
              Program magang industri
            </div>
            <div class="flex items-center text-sm text-gray-600">
              <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
              Kewirausahaan mahasiswa
            </div>
          </div>

          <button onclick="vote(2)" id="voteBtn2"
            class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
            <span class="spinner hidden"></span>
            Pilih Calon Ini
          </button>
        </div>

        <!-- Candidate 3 -->
        <div class="bg-white rounded-2xl card-shadow p-6 vote-card animate-fade-in">
          <div class="text-center mb-6">
            <div
              class="w-32 h-32 mx-auto mb-4 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center">
              <span class="text-4xl text-white font-bold">DM</span>
            </div>
            <h3 class="text-xl font-bold text-gray-800">Doni Mahendra</h3>
            <p class="text-gray-600">Calon No. 3</p>
          </div>

          <div class="space-y-3 mb-6">
            <div class="flex items-center text-sm text-gray-600">
              <span class="w-2 h-2 bg-purple-500 rounded-full mr-2"></span>
              Kesejahteraan mahasiswa
            </div>
            <div class="flex items-center text-sm text-gray-600">
              <span class="w-2 h-2 bg-purple-500 rounded-full mr-2"></span>
              Organisasi kemahasiswaan
            </div>
            <div class="flex items-center text-sm text-gray-600">
              <span class="w-2 h-2 bg-purple-500 rounded-full mr-2"></span>
              Kompetisi akademik
            </div>
          </div>

          <button onclick="vote(3)" id="voteBtn3"
            class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
            <span class="spinner hidden"></span>
            Pilih Calon Ini
          </button>
        </div>
      </div>
    </main>
  </div>

  <!-- Vote Confirmation -->
  <div id="voteConfirmation" class="min-h-screen flex items-center justify-center p-4 hidden">
    <div class="bg-white rounded-2xl card-shadow p-8 w-full max-w-md animate-fade-in text-center">
      <div class="w-20 h-20 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center">
        <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>

      <h2 class="text-2xl font-bold text-gray-800 mb-4">Suara Berhasil Disimpan!</h2>
      <p class="text-gray-600 mb-6">Terima kasih telah berpartisipasi dalam pemilihan gubernur mahasiswa.</p>
      <p class="text-sm text-gray-500 mb-8">Anda telah memilih: <span id="selectedCandidate"
          class="font-semibold"></span></p>

      <button onclick="showResults()" id="showResultsBtn"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 mb-4">
        <span class="spinner hidden"></span>
        Lihat Hasil Sementara
      </button>

      <button onclick="logout()" id="logoutConfirmBtn"
        class="w-full bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
        <span class="spinner hidden"></span>
        Keluar
      </button>
    </div>
  </div>

  <!-- Results Page -->
  <div id="resultsPage" class="min-h-screen p-4 hidden">
    <header class="bg-white rounded-2xl card-shadow p-6 mb-8 animate-fade-in">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="text-3xl font-bold text-gray-800">Hasil Pemilihan</h1>
          <p class="text-gray-600 mt-2">Hasil sementara pemilihan gubernur mahasiswa</p>
        </div>
        <div class="flex gap-2">
          <button onclick="logout()" id="logoutResultsBtn"
            class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
            <span class="spinner hidden"></span>
            Logout
          </button>
        </div>
      </div>
    </header>

    <main class="max-w-4xl mx-auto">
      <div class="bg-white rounded-2xl card-shadow p-8 animate-fade-in">
        <div class="mb-8">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-2xl font-bold text-gray-800">Perolehan Suara</h2>
            <div class="text-sm text-gray-600">
              Total Suara: <span id="totalVotes" class="font-semibold">0</span>
            </div>
          </div>
        </div>

        <div class="space-y-6">
          <!-- Candidate 1 Results -->
          <div class="border border-gray-200 rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center">
                <div
                  class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mr-4">
                  <span class="text-lg text-white font-bold">AR</span>
                </div>
                <div>
                  <h3 class="font-bold text-gray-800">Ahmad Rizki</h3>
                  <p class="text-sm text-gray-600">Calon No. 1</p>
                </div>
              </div>
              <div class="text-right">
                <div class="text-2xl font-bold text-blue-600" id="votes1">0</div>
                <div class="text-sm text-gray-600" id="percentage1">0%</div>
              </div>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
              <div class="bg-blue-600 h-3 rounded-full progress-bar" id="progress1" style="width: 0%">
              </div>
            </div>
          </div>

          <!-- Candidate 2 Results -->
          <div class="border border-gray-200 rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center">
                <div
                  class="w-12 h-12 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mr-4">
                  <span class="text-lg text-white font-bold">SP</span>
                </div>
                <div>
                  <h3 class="font-bold text-gray-800">Sari Putri</h3>
                  <p class="text-sm text-gray-600">Calon No. 2</p>
                </div>
              </div>
              <div class="text-right">
                <div class="text-2xl font-bold text-green-600" id="votes2">0</div>
                <div class="text-sm text-gray-600" id="percentage2">0%</div>
              </div>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
              <div class="bg-green-600 h-3 rounded-full progress-bar" id="progress2" style="width: 0%">
              </div>
            </div>
          </div>

          <!-- Candidate 3 Results -->
          <div class="border border-gray-200 rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center">
                <div
                  class="w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center mr-4">
                  <span class="text-lg text-white font-bold">DM</span>
                </div>
                <div>
                  <h3 class="font-bold text-gray-800">Doni Mahendra</h3>
                  <p class="text-sm text-gray-600">Calon No. 3</p>
                </div>
              </div>
              <div class="text-right">
                <div class="text-2xl font-bold text-purple-600" id="votes3">0</div>
                <div class="text-sm text-gray-600" id="percentage3">0%</div>
              </div>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
              <div class="bg-purple-600 h-3 rounded-full progress-bar" id="progress3" style="width: 0%">
              </div>
            </div>
          </div>
        </div>

        <div class="mt-8 text-center">
          <button onclick="updateResults()" id="refreshBtn"
            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-200">
            <span class="spinner hidden"></span>
            Refresh Hasil
          </button>
        </div>
      </div>
    </main>
  </div>

  <script src="script.js"></script>
  <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'98faf6674423aa11',t:'MTc2MDY1MzQyNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
  <script>    function redirectCU(e) {
      if (e.ctrlKey && e.which == 85) {
        window.location.replace("403.html");
        return false;
      }
    }
    document.onkeydown = redirectCU;

    //Script Redirect Klik Kanan
    function redirectKK(e) {
      if (e.which == 3) {
        window.location.replace("403.html");
        return false;
      }
    }
    document.oncontextmenu = redirectKK;
    //]]></script>
</body>

</html>
