<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pemilihan Presiden Mahasiswa</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // ====================
    // KONFIGURASI SUPABASE
    // ====================
    const SUPABASE_URL = 'https://xxwwbydzorlxulbcrldo.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4d3dieWR6b3JseHVsYmNybGRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExMDAxMDYsImV4cCI6MjA3NjY3NjEwNn0.La5nOg80azsQp_ZuqXuj0CI552hQBwdwWgxEqfaDlDk';
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  </script>
  <style>
    body {
      box-sizing: border-box;
    }

    .gradient-bg {
      background: linear-gradient(140deg, #402A1C 50%, #F0C785 100%);
    }

    p {
      color: rgb(255, 255, 255);
    }

    h1 {
      color: rgb(255, 255, 255);
    }

    .card-shadow {
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .animate-fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .vote-card {
      transition: all 0.3s ease;
    }

    .vote-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
    }

    .progress-bar {
      transition: width 0.5s ease-in-out;
    }

    /* Tambahan untuk spinner loading */
    .spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #ffffff;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s ease-in-out infinite;
      margin-right: 8px;
    }

    .spinner.hidden {
      display: none;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .edit-bg {
      background-color: rgba(255, 255, 255, 0.192);
      border: 2px solid #c7c7c7;
      border-radius: 10px;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.705);
    }

    .wrep {
      position: relative;
      background-color: transparent;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
    }

    .wrep .form-edit input {
      width: 100%;
      position: relative;
    }

    .wrep .form-edit .edit-input {
      position: relative;
      width: 100%;
      height: 50px;
      border-bottom: 2px solid #ffffff;
      margin: 30px 0;
    }

    .wrep .form-edit .edit-input label {
      position: absolute;
      top: 50%;
      left: 5px;
      transform: translateY(-50%);
      font-weight: 500;
      color: #000000;
      pointer-events: none;
    }

    .wrep .form-edit .edit-input input:focus~label,
    .wrep .form-edit .edit-input input:valid~label {
      transform: translateY(-50%);
      top: -10px;
      left: 0;
      color: #ffffff;
    }

    .form-edit .edit-input input {
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.082);
      border: none;
      outline: none;
      color: #ffffff;
      font-size: 1.1rem;
    }

    .form-edit .edit-input .icon {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #000000;
      font-size: 1.5rem;
      line-height: 57px;
    }

    .borrder {
      border: #ffffff 2px solid;
    }
  </style>
</head>

<body class="gradient-bg min-h-screen">
  <!-- Login Form -->
  <div id="loginForm" class="wrep min-h-screen flex items-center justify-center p-4">
    <div class="edit-bg form-edit rounded-2xl card-shadow p-8 w-full max-w-md animate-fade-in">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-black-800 mb-2">Pemilihan Presiden Mahasiswa</h1>
        <p class="text-black-600">Masukkan data Anda untuk memulai voting</p>
      </div>

      <form id="voterForm" class=" space-y-6">
        <div class="edit-input">
          <span class="icon"><ion-icon name="mail-outline"></ion-icon></span>
          <input type="text" id="nama" required
            class="w-full text-sm font-medium text-black-300 px-4 py-3 border border-black-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
          <label for="nama" class=" text-sm font-medium text-black-700 mb-2">Nama Lengkap</label>
        </div>

        <div class="edit-input">
          <span class="icon"><ion-icon name="mail-outline"></ion-icon></span>
          <input type="text" id="nim" required
            class="w-full text-sm font-medium text-black-300 px-4 py-3 border border-black-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
          <label for="nim" class="block text-sm font-medium text-black-700 mb-2">NIM</label>
        </div>

        <div class="edit-input">
          <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
          <input type="password" id="password" required
            class="w-full text-sm font-medium text-black-300 px-4 py-3 border border-black-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
          <label for="password" class="block text-sm font-medium text-black-700 mb-2">Password</label>
        </div>

        <button type="submit" id="loginBtn"
          class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
          <span class="spinner hidden"></span>
          Masuk ke Voting
        </button>
      </form>
    </div>
  </div>

  <!-- Voting Page -->
  <div id="votingPage" class="min-h-screen p-4 hidden">
    <header class="bg-white rounded-2xl card-shadow p-6 mb-8 animate-fade-in">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="text-3xl font-bold text-gray-800">Pemilihan Presiden Mahasiswa</h1>
          <p class="text-gray-600 mt-2">Selamat datang, <span id="voterName" class="font-semibold"></span></p>
        </div>
        <button onclick="logout()" id="logoutBtn"
          class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
          <span class="spinner hidden"></span>
          Logout
        </button>
      </div>
    </header>

    <main class="max-w-6xl mx-auto">
      <div id="kandidatList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
    </main>

  </div>

  <!-- Vote Confirmation -->
  <div id="voteConfirmation" class="min-h-screen flex items-center justify-center p-4 hidden">
    <div class="bg-white rounded-2xl card-shadow p-8 w-full max-w-md animate-fade-in text-center">
      <div class="w-20 h-20 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center">
        <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>

      <h2 class="text-2xl font-bold text-gray-800 mb-4">Suara Berhasil Disimpan!</h2>
      <p class="text-gray-600 mb-6">Terima kasih telah berpartisipasi dalam pemilihan presiden mahasiswa.</p>
      <p class="text-sm text-gray-500 mb-8">Anda telah memilih: <span id="selectedCandidate"
          class="font-semibold"></span></p>

      <button onclick="showResults()" id="showResultsBtn"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 mb-4">
        <span class="spinner hidden"></span>
        Lihat Hasil Sementara
      </button>

      <button onclick="logout()" id="logoutConfirmBtn"
        class="w-full bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
        <span class="spinner hidden"></span>
        Keluar
      </button>
    </div>
  </div>

  <!-- Results Page -->
  <div id="resultsPage" class="min-h-screen p-4 hidden">
    <header class="bg-white rounded-2xl card-shadow p-6 mb-8 animate-fade-in">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="text-3xl font-bold text-gray-800">Hasil Pemilihan</h1>
          <p class="text-gray-600 mt-2">Hasil sementara pemilihan presiden mahasiswa</p>
        </div>
        <div class="flex gap-2">
          <button onclick="logout()" id="logoutResultsBtn"
            class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
            <span class="spinner hidden"></span>
            Logout
          </button>
        </div>
      </div>
    </header>

    <main class="max-w-4xl mx-auto">
      <div class="bg-white rounded-2xl card-shadow p-8 animate-fade-in">
        <div class="mb-8">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-2xl font-bold text-gray-800">Perolehan Suara</h2>
            <div class="text-sm text-gray-600">
              Total Suara: <span id="totalVotes" class="font-semibold">0</span>
            </div>
          </div>
        </div>

        <div class="space-y-6">
          <div id="resultsContainer">
            <!-- Akan diisi dinamis -->
          </div>
        </div>
    </main>
  </div>

  <script src="script.js"></script>
  <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'98faf6674423aa11',t:'MTc2MDY1MzQyNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
  <!-- <script>    function redirectCU(e) {
      if (e.ctrlKey && e.which == 85) {
        window.location.replace("403.html");
        return false;
      }
    }
    document.onkeydown = redirectCU;

    //Script Redirect Klik Kanan
    function redirectKK(e) {
      if (e.which == 3) {
        window.location.replace("403.html");
        return false;
      }
    }
    document.oncontextmenu = redirectKK;
    //]]></script> -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</body>

</html>

